jQuery(document).ready(function($){if($("#LoginWithAjax").length>0){$("#LoginWithAjax").addClass("lwa");$("#LoginWithAjax_Status").addClass("lwa-status");$("#LoginWithAjax_Register").addClass("lwa-register");$("#LoginWithAjax_Remember").addClass("lwa-remember");$("#LoginWithAjax_Links_Remember").addClass("lwa-links-remember");$("#LoginWithAjax_Links_Remember_Cancel").addClass("lwa-links-remember-cancel");$("#LoginWithAjax_Form").addClass("lwa-form")}$(".lwa-bones").each(function(i){$(this).attr("id","lwa-"+(i+1))});$(document).on("submit","form.lwa-form, form.lwa-remember, div.lwa-register form",function(event){event.preventDefault();LoginWithAJAX.submit(this)});$(document).on("lwa_login",function(event,data,form){if(data.result===true&&(data.skip==="undefined"||!data.skip)){if(data.widget!=null){$.get(data.widget,function(widget_result){var newWidget=$(widget_result);form.parent(".lwa").replaceWith(newWidget);var lwaSub=newWidget.find(".").show();var lwaOrg=newWidget.parent().find(".lwa-title");lwaOrg.replaceWith(lwaSub)})}else{if(data.redirect==null){window.location.reload()}else{window.location=data.redirect}}}});$(".lwa-modal-trigger").each(function(i,e){$(e).find(".lwa-modal-trigger-el, button, a").first().on("click",function(){var modal_id=$(this).closest(".lwa-modal-trigger").first().data("modal-id");$("#"+modal_id+", #"+modal_id+" .lwa-modal-popup").addClass("active")})});$(".lwa-modal-overlay").each(function(i,e){$("body").append(e)});$(".lwa-modal-overlay .lwa-close-modal").click(function(e){let modal=$(this).closest(".lwa-modal-overlay");if(!modal.attr("data-prevent-close")){modal.removeClass("active").find(".lwa-modal-popup").removeClass("active");$(document).triggerHandler("lwa_modal_close",[modal])}});$(".lwa-modal-overlay").click(function(e){var target=$(e.target);if(target.hasClass("lwa-modal-overlay")){let modal=$(this);if(!modal.attr("data-prevent-close")){modal.removeClass("active").find(".lwa-modal-popup").removeClass("active");$(document).triggerHandler("lwa_modal_close",modal)}}});$(document).on("click",".lwa-links-register-inline-cancel, .lwa-links-remember-cancel",function(event){event.preventDefault();let lwa=$(this).closest(".lwa");lwa.find(".lwa-form").slideDown("slow");lwa.find(".lwa-remember, .lwa-register").slideUp("slow")});$(document).on("click",".lwa-links-register-inline",function(event){let lwa=$(this).closest(".lwa");var register_form=lwa.find(".lwa-register");if(register_form.length>0){event.preventDefault();register_form.slideDown("slow");lwa.find(".lwa-remember, .lwa-form").slideUp("slow")}});$(document).on("click",".lwa-links-remember",function(event){let lwa=$(this).closest(".lwa");var remember_form=lwa.find(".lwa-remember");if(remember_form.length>0){event.preventDefault();remember_form.slideDown("slow");lwa.find(".lwa-register, .lwa-form").slideUp("slow")}});if($(".lwa-minimalistic").length){lwa_init_minimalistic()}$(document).triggerHandler("lwa_loaded")});const lwa_init_minimalistic=function(){jQuery(".lwa-minimalistic .input-field label").each(function(i){jQuery(this).next("input").after(this)});jQuery(".lwa-minimalistic p > label > input").each(function(i,el){let input=jQuery(this);let label=input.parent();let p=label.parent();let div=jQuery('<div class="input-field"></div>');input.appendTo(div);label.appendTo(div);label.find("br").remove();if(!input.attr("placeholder")){input.attr("placeholder",label.text())}p.replaceWith(div)})};const LoginWithAJAX={submit:function(form,args=null,override=null){if(!(form instanceof jQuery))form=jQuery(form);var response={result:null,skip:false};var statusElement=LoginWithAJAX.addStatusElement(form);jQuery(document).triggerHandler("lwa_pre_ajax",[response,form,statusElement]);if(response.result===null){var ajaxFlag=form.find(".lwa-ajax");if(ajaxFlag.length==0){ajaxFlag=jQuery('<input class="lwa-ajax" name="lwa" type="hidden" value="1" />');form.prepend(ajaxFlag)}LoginWithAJAX.start(form);let form_data;if(override){form_data=[]}else{form_data=form.serializeArray()}if(args!==null){if(!Array.isArray(args)){Object.keys(args).forEach(function(key){form_data.unshift({name:key,value:args[key]})})}else{form_data.push.apply(form_data,args)}}let form_string=jQuery.param(form_data);let form_action=typeof LWA==="undefined"?form.attr("action"):LWA.ajaxurl;jQuery.ajax({type:"POST",url:form_action,data:form_string,success:function(response){jQuery(document).triggerHandler("lwa_"+response.action,[response,form,statusElement]);if(response.skip==="undefined"||!response.skip){LoginWithAJAX.handleStatus(response,statusElement)}},error:function(jqXHR,textStatus,errorThrown){response.result=false;jQuery(document).triggerHandler("lwa_ajax_error",[response,jqXHR,textStatus,errorThrown,form,statusElement]);if(!response.skip){response.error=textStatus+" : "+errorThrown;LoginWithAJAX.handleStatus({},statusElement)}else{LoginWithAJAX.finish(form)}},complete:function(jqXHR,textStatus){jQuery(document).triggerHandler("lwa_ajax_complete",[jqXHR,textStatus,form,statusElement]);if(textStatus!=="success"&&textStatus!=="error"){LoginWithAJAX.finish(form)}},dataType:"jsonp"})}else{if(!response.skip){LoginWithAJAX.handleStatus(response,statusElement)}}},handleStatus:function(response,statusElement){this.finish();statusElement=jQuery(statusElement);if(response.result===true){statusElement.removeClass("lwa-status-invalid").addClass("lwa-status-confirm").html(response.message)}else if(response.result===false){statusElement.removeClass("lwa-status-confirm").addClass("lwa-status-invalid").html(response.error);statusElement.find("a").on("click",function(event){var remember_form=jQuery(this).parents(".lwa").find("form.lwa-remember");if(remember_form.length>0){event.preventDefault();remember_form.show("slow")}})}else{statusElement.removeClass("lwa-status-confirm").addClass("lwa-status-invalid").html("An error has occured. Please try again.")}jQuery(document).triggerHandler("lwa_handleStatus",[response,statusElement])},addStatusElement:function(form){let statusElement=form.find(".lwa-status");jQuery(document).triggerHandler("lwa_addStatusElement",[form,statusElement]);if(statusElement.length===0){statusElement=jQuery('<span class="lwa-status" role="alert"></span>');form.prepend(statusElement)}return statusElement},start:function(wrapper){if(wrapper.hasClass("lwa")){wrapper.addClass("lwa-is-working")}else{wrapper.closest(".lwa").addClass("lwa-is-working")}jQuery('<div class="lwa-loading"></div>').prependTo(wrapper.closest(".lwa-wrapper"))},finish:function(wrapper=null){jQuery(".lwa-loading").remove();if(wrapper&&wrapper.hasClass("lwa-is-working")){wrapper.removeClass("lwa-is-working")}else if(wrapper){wrapper.closest(".lwa-is-working").removeClass("lwa-is-working")}else{jQuery(".lwa-is-working").removeClass("lwa-is-working")}}};const lwaAjax=LoginWithAJAX.handleStatus;