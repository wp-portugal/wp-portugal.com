(this.webpackJSONPwpmdb=this.webpackJSONPwpmdb||[]).push([[8],{808:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(1),i=a(6),s=a(39),r=a(13),o=a(124),p=a.n(o),u=a(43),d=a(20),m=a.n(d),b=a(12),f=a.n(b),_=a(225),g=Object(i.c)(function(e){return{theme_plugin_files:e.theme_plugin_files,panel_info:e.panels,local_version:e.migrations.local_site.theme_plugin_files_version}},{})(function(e){var t="",a=e.theme_plugin_files,n=e.disabled,l=e.local_version,i=e.panelsOpen;if(n)return c.a.createElement(_.a,{message:e.theme_plugin_files.message,pluginSlug:"wp-migrate-db-pro-theme-plugin-files",remoteUpgradable:e.theme_plugin_files.remoteUpgradable,version:l,shortName:s.c});!m()(i,e.type)&&a[e.type].enabled&&(t=e.summary);return c.a.createElement(c.a.Fragment,null,f()(t))}),h=a(661),O=a(101),v=a(25),j=a(170),E=function(e){var t=e.ariaLabel,a=e.optionChoices,n=e.type,l=e.value,s=Object(i.d)(),r=a,o=function(t){s(e.updateOption(t.target.value,n))},p=Object.keys(r).map(function(e){var t=n+"-"+e,a=l===e;return c.a.createElement("div",{key:e},c.a.createElement("input",{id:t,type:"radio",value:e,checked:a,onChange:o,name:n}),c.a.createElement("label",{for:t},f()(r[e])))});return c.a.createElement("div",{className:"radiogroup",role:"radiogroup","aria-label":t},p)},x=a(100),y=function(e,t,a){var n=[];if("object"===typeof t){var c=Object.values(t).map(function(e){return e[0].path});"selected"===a["".concat(e,"_option")]&&a["".concat(e,"_selected")].forEach(function(e){c.includes(e)&&n.push(e)}),"except"===a["".concat(e,"_option")]&&a["".concat(e,"_excluded")].forEach(function(e){c.includes(e)&&n.push(e)}),"active"===a["".concat(e,"_option")]&&Object.values(t).forEach(function(e){e[0].active&&n.push(e[0].path)}),"all"===a["".concat(e,"_option")]&&(n=c)}return n};var w=function(e,t){var a=e.theme_plugin_files,o=e.panelsOpen,d=e.current_migration,m=e.remote_site,b=e.local_site,f=d.status,_=d.intent,w=function(e){var t=e.theme_plugin_files;return"undefined"!==typeof t.available&&!t.available}(e),P=Object(i.d)(),S=t.title,N=t.type,k=t.panel_name,C=t.items,F=C.map(function(e){return e.path}),T=!1,U=_.charAt(0).toUpperCase()+_.slice(1),L={all:Object(l.c)(Object(l.a)("%s all %s","wp-migrate-db"),U,N),active:Object(l.c)(Object(l.a)("%s only active %s","wp-migrate-db"),U,N),selected:Object(l.c)(Object(l.a)("%s only selected %s","wp-migrate-db"),U,N),except:Object(l.c)(Object(l.a)("%s all %s <b>except</b> those selected","wp-migrate-db"),U,N)},D=function(e,t,a,n,c){var l=c.site_details,i=y(n,"plugins"===n?l.plugins:l.themes,e);return{enabled:e["".concat(n.slice(0,-1),"_files")].enabled,isOpen:t.includes("".concat(n.slice(0,-1),"_files")),selected:i,selectionEmpty:p()(a,{name:"SELECTED_".concat(n.toUpperCase(),"_EMPTY")})}}(a,o,f,N,"pull"===_?m:b),I=D.enabled,J=D.isOpen,M=D.selected,A=D.selectionEmpty;Object(n.useEffect)(function(){"select"===a["".concat(N,"_option")]&&P(e.updateSelected(M,N)),"except"===a["".concat(N,"_option")]&&e.updateExcluded(M,N)},[]),M.length&&I&&!J&&(T=!0);var Y=[],q="selected"===a["".concat(N,"_option")]||"except"===a["".concat(N,"_option")];return T&&Y.push("has-divider"),I&&Y.push("enabled"),c.a.createElement(u.a,{title:S,className:Y.join(" "),panelName:k,disabled:w,enabled:I,forceDivider:T,callback:function(t){return Object(j.b)(t,k,J,I,w,e.addOpenPanel,e.removeOpenPanel,function(){return P(Object(s.j)(k))})},toggle:Object(s.j)(k),hasInput:!0,bodyClass:"tpf-panel-body",panelSummary:c.a.createElement(g,Object(r.a)({},e,{disabled:w,items:C,selected:M,title:S,type:k,summary:L[a["".concat(N,"_option")]]}))},c.a.createElement("div",null,c.a.createElement(E,{ariaLabel:Object(l.a)("Plugin options","wp-migrate-db"),optionChoices:L,intent:"push",type:N,value:a["".concat(N,"_option")],updateOption:s.p}),c.a.createElement(x.a,{id:"".concat(N,"-multiselect"),options:C,extraLabels:"",stateManager:function(t){"except"===a["".concat(N,"_option")]&&e.updateExcluded(t,N),e.updateSelected(t,N)},selected:M,visible:!0,disabled:!q,updateSelected:function(t){var n=t.map(function(e){return e.path});"except"===a["".concat(N,"_option")]?e.updateExcluded(n,N):e.updateSelected(n,N)},selectInverse:function(){return"except"===a["".concat(N,"_option")]?Object(O.a)(e.updateExcluded,F,M,N):Object(O.a)(e.updateSelected,F,M,N)},showOptions:q})),c.a.createElement("div",{className:"excludes-wrap"},c.a.createElement(h.a,Object(r.a)({},e,{excludes:a.excludes,excludesUpdater:e.updateExcludes,type:N}))),A&&c.a.createElement(v.c,{className:"error-msg"},"selected"===a["".concat(N,"_option")]&&Object(l.c)(Object(l.a)("Please select at least one %s for migration","wp-migrate-db"),"themes"===N?"theme":"plugin"),"except"===a["".concat(N,"_option")]&&Object(l.c)(Object(l.a)("Please select at least one %s to exclude from migration","wp-migrate-db"),"themes"===N?"theme":"plugin")))},P=a(4),S=(a(615),a(34)),N=a(22);function k(e,t){var a={};return["themes","plugins"].forEach(function(n,c){var l=e.local_site.site_details[n];"pull"===t&&(l=e.remote_site.site_details[n]);var i=[];for(var s in l){var r=l[s],o={name:r[0].name,active:r[0].active,path:r[0].path};i.push(o)}return a[n]=i}),a}var C=function(e){var t=k(e,e.current_migration.intent).themes;return w(e,{title:Object(l.a)("Theme Files","wp-migrate-db"),type:"themes",panel_name:"theme_files",items:t})},F=function(e){var t=k(e,e.current_migration.intent).plugins;return w(e,{title:Object(l.a)("Plugin Files","wp-migrate-db"),type:"plugins",panel_name:"plugin_files",items:t})};t.default=Object(i.c)(function(e){var t=Object(P.f)("current_migration",e),a=Object(P.f)("local_site",e),n=Object(P.f)("remote_site",e),c=Object(S.a)("panelsOpen",e),l=Object(P.d)("stages",e),i=Object(P.g)("status",e);return{theme_plugin_files:e.theme_plugin_files,current_migration:t,local_site:a,remote_site:n,panelsOpen:c,stages:l,status:i}},{toggleThemePluginFiles:s.j,updateTPFOption:s.p,updateSelected:s.o,updateExcluded:s.m,togglePanelsOpen:N.l,addOpenPanel:N.c,removeOpenPanel:N.h,updateExcludes:s.n,kickOffTPFStage:s.g})(function(e){return c.a.createElement("div",{className:"theme-plugin-files"},c.a.createElement(C,e),c.a.createElement(F,e))})}}]);